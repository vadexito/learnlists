<?php

$title = 'Learn at LearnLists';
$this->headTitle($title);
$this->placeholder('header')->captureStart();
?>
<header id="jumbotron-header">
    <div class="container">
        <h1><?php echo $this->escapeHtml($title); ?></h1>
    </div>
</header>
<?php $this->placeholder('header')->captureEnd(); ?>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>Category</th>
            <th>Rating</th>
            <th>Title</th>
            <th>Questions</th>
            <th>Owner</th>
            <th>Creation date</th>
        </tr>
    </thead>
    <tbody>
<?php foreach ($lists as $list) : ?>
      <tr>
        <td><?php echo $list->id; ?></td>
        <td>category</td>
        <td>
            <?php echo round($ratingService->getRatingSet($list->id)->getAmount()); ?>
            <?php if ($this->zfcUserIdentity()) : ?><a href="<?php echo $this->url('list',['action' => 'rate','id' => $list->id]); ?>">Vote</a><?php endif;?>
        </td>
        <td><a href="<?php echo $this->url('question',['id' => $list->id]); ?>"><?php echo $list->title; ?></a></td>
        <td>
            <?php echo count($list->questions); ?>
           <?php if ($this->zfcUserIdentity() && ($list->author->getId() === $this->zfcUserIdentity()->getId())) :?> - <a href="<?php echo $this->url('question',['action' => 'add','id' => $list->id]); ?>">Add</a><?php endif; ?>
        </td>
        <td><?php echo $this->gravatar($list->author->getEmail(),['img_size' => '30px']);echo ' '.$this->zfcUserDisplayName($list->author) ?></td>
        <td><?php echo $list->creationDate->format(DateTime::ISO8601); ?></td>
      </tr>
<?php endforeach; ?>
    </tbody>
</table>